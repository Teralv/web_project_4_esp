!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var r=function(){function e(t,r,o){var i,u,c,a=this,l=o.handleCardClick,s=o.handleDeleteClick,f=o.handleAddLike,p=o.handleRemoveLike,y=o.userID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,c=function(e){return a._likesArray=e,a._likesArray},(u=n(u="updateLikes"))in i?Object.defineProperty(i,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[u]=c,this._name=t.name,this._link=t.link,this._id=t._id,this._likesArray=t.likes,this._cardLikes=this._likesArray.length,this._ownerId=t.owner._id,this._cardSelector=r,this._handleCardClick=l,this._handleDeleteClick=s,this._handleAddLike=f,this._handleRemoveLike=p,this._user=y}var r,o;return r=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__name").textContent=this._name,this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__image").alt="Imagen de ".concat(this._name),this._element.querySelector(".element__like-counter").textContent=this._cardLikes?this._cardLikes:"";var t=this._likesArray.some((function(t){return t._id===e._user}));return this._element.querySelector(".element__heart").classList.toggle("element__heart_black",t),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__heart").addEventListener("click",(function(){e._likesArray.some((function(t){return t._id===e._user}))?e._handleRemoveLike({id:e._id}):e._handleAddLike({id:e._id})})),this._element.querySelector(".element__image").addEventListener("click",(function(){e._openImagePopup()})),this._element.querySelector(".element__trash").addEventListener("click",(function(){e._handleDeleteClick({id:e._id})})),this._ownerId!==this._user&&this._element.querySelector(".element__trash").remove()}},{key:"addLikeFilter",value:function(){this._element.querySelector(".element__heart").classList.add("element__heart_black"),this._element.querySelector(".element__like-counter").textContent=this._likesArray.length}},{key:"removeLikeFilter",value:function(){this._element.querySelector(".element__heart").classList.remove("element__heart_black"),this._element.querySelector(".element__like-counter").textContent=this._likesArray.length}},{key:"updateForZeroLikes",value:function(){0===this._cardLikes&&(this._element.querySelector(".element__like-counter").textContent="")}},{key:"_trashBtn",value:function(){this._element.querySelector(".element__trash").closest(".element").remove()}},{key:"_openImagePopup",value:function(){this._handleCardClick({link:this._link,name:this._name})}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var l=u((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_showInputError",(function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),r.textContent=n,r.classList.add("form__input-error_active")})),c(this,"_hideInputError",(function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""})),c(this,"_checkInputValidity",(function(e,t){t.validity.valid?n._hideInputError(e,t):n._showInputError(e,t,t.validationMessage)})),c(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),c(this,"_toggleButtonState",(function(e,t){n._hasInvalidInput(e)?t.classList.add("popup__btn_inactive"):t.classList.remove("popup__btn_inactive")})),c(this,"_setEventListeners",(function(e){var t=Array.from(e.querySelectorAll(".form__input")),r=e.querySelector(".popup__btn");n._toggleButtonState(t,r),t.forEach((function(o){o.addEventListener("input",(function(){n._checkInputValidity(e,o),n._toggleButtonState(t,r)}))}))})),c(this,"enableValidation",(function(){Array.from(document.querySelectorAll(".form")).forEach((function(e){var t=e.querySelector(".popup__btn");e.addEventListener("submit",(function(e){t.classList.add("popup__btn_inactive"),e.preventDefault()})),Array.from(e.querySelectorAll(".form__set")).forEach((function(e){n._setEventListeners(e)}))}))})),this._validation=t}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataArray=r,this.renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderedItems",value:function(){var e=this;this._dataArray.forEach((function(t){e.renderer(t)}))}},{key:"addInitalItems",value:function(e){this._container.append(e)}},{key:"addItems",value:function(e){this._container.prepend(e)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){if("Escape"===e.key)return this.close()}},{key:"_handleOutsideClick",value:function(e){(e.target.classList.contains("popup__section")||e.target.classList.contains("popup__background"))&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-btn").addEventListener("click",(function(){e.close()})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)})),this._popupElement.addEventListener("click",(function(t){e._handleOutsideClick(t)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popupElement.querySelector(".image-popup__image"),t._popupTitle=t._popupElement.querySelector(".image-popup__title"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;b(S(u.prototype),"open",this).call(this),this._popupImage.src=t,this._popupImage.alt="Imagen de ".concat(n),this._popupTitle.textContent=n,b(S(u.prototype),"setEventListeners",this).call(this)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupSelector,r=e.btnForPopup,o=e.submitCallback;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._form=t._popupElement.querySelector(".form"),t._buttonSubmit=t._popupElement.querySelector(".popup__btn"),t._handleFormSubmit=o,t._btnForPopup=document.querySelector(r),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"setEventListeners",value:function(){var e=this;this._btnForPopup.addEventListener("click",(function(){E(L(u.prototype),"open",e).call(e)})),E(L(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){E(L(u.prototype),"close",this).call(this),this._form.reset(),this._popupElement.querySelector(".popup__btn").classList.add("popup__btn_inactive")}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var C=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._username=n,this._about=r,this._avatarSelector=o,this._userID=i,this._nameInput=document.querySelector("#name-input"),this._aboutInput=document.querySelector("#about-input")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameInput.textContent,about:this._jobInput.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.about;this._username.textContent=t,this._about.textContent=n}},{key:"setUserAvatar",value:function(e){this._avatarSelector.src=e}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var T=function(){function e(t){var n=t.baseURL,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=n,this._headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseURL,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseURL,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseURL,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseURL,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editProfileInfo",value:function(e,t){return fetch("".concat(this._baseURL,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseURL,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseURL,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"avatarImage",value:function(e){return fetch("".concat(this._baseURL,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._submitButton=o,t}return t=u,(n=[{key:"close",value:function(){U(D(u.prototype),"close",this).call(this),this.renderLoading(!1)}},{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){e?(this._submitButton.textContent="Guardando...",this._submitButton.classList.add("popup__btn_inactive")):(this._submitButton.textContent="SÃ­",this._submitButton.classList.remove("popup__btn_inactive"))}},{key:"setEventListeners",value:function(){var e=this;U(D(u.prototype),"setEventListeners",this).call(this),this._submitButton.addEventListener("click",(function(t){t.preventDefault(),e._handleFormSubmit(),e.renderLoading(!0)}))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h),V=document.querySelector(".root").querySelector(".page"),N=V.querySelector(".profile__author"),G=V.querySelector(".profile__about-me"),J=V.querySelector(".profile__photo"),H=V.querySelector("#popup__profile-form"),Z=V.querySelector("#popup__profile"),z=(H.querySelector("#name-input"),H.querySelector("#about-input"),Z.querySelector(".popup__profile-close-btn"),V.querySelector(".profile__edit-btn"),Z.querySelector(".popup__btn"),V.querySelector("#popup__places-form")),M=(V.querySelector("#popup__cards").querySelector(".popup__places-close-btn"),V.querySelector(".profile__add-btn"),z.querySelector(".popup__place"),z.querySelector(".popup__url"),V.querySelector("#image-popup"),V.querySelector("#popup__delete").querySelector(".popup__confirm-btn")),K=new C({nameSelector:N,aboutSelector:G,avatarSelector:J}),Q=new F({popupSelector:"#popup__delete",submitButton:M}),W=new k("#image-popup");W.setEventListeners(),Q.setEventListeners();var X=new T({baseURL:"https://around.nomoreparties.co/v1/web_es_07",headers:{authorization:"b7e71284-4020-44f4-a80f-43722c5b3ece","Content-Type":"application/json"}}),Y=new P({popupSelector:"#popup__profile",btnForPopup:".profile__edit-btn",submitCallback:function(e){X.editProfileInfo(e.name,e.about).then((function(e){K.setUserInfo({username:e.name,about:e.about}),Y.close()})).catch((function(e){return console.log(e)}))}});Y.setEventListeners(),X.getUserInfo().then((function(e){K.setUserInfo({username:e.name,about:e.about}),K.userId=e._id})).then((function(){X.getInitialCards().then((function(e){var t=new p({data:e,renderer:function(e){var n=ee(e);t.addInitalItems(n)}},"#elements");t.renderedItems();var n=new P({popupSelector:"#popup__cards",btnForPopup:".profile__add-btn",submitCallback:function(e){X.addNewCard(e.name,e.link).then((function(e){var r=ee(e);t.addItems(r),n.close()})).catch((function(e){return console.log(e)}))}});n.setEventListeners()}))}));var $=new P({popupSelector:"#popup__avatar-image",btnForPopup:".profile__container",submitCallback:function(e){X.avatarImage(e.link).then((function(){K.setUserAvatar(e.link),$.close()})).catch((function(e){return console.log(e)}))}});function ee(e){var t=new r(e,"#element-template",{handleCardClick:function(e){var t=e.name,n=e.link;W.open({name:t,link:n})},handleDeleteClick:function(e){var n=e.id;Q.open(),Q.setSubmitAction((function(){X.deleteCard(n).then((function(){Q.close(),t._trashBtn()})).catch((function(e){return console.log(e)}))}))},handleAddLike:function(e){var n=e.id;X.addLike(n).then((function(e){t.updateLikes(e.likes),t.addLikeFilter()})).catch((function(e){return console.log(e)}))},handleRemoveLike:function(e){var n=e.id;X.deleteLike(n).then((function(e){t.updateLikes(e.likes),t.removeLikeFilter()})).catch((function(e){return console.log(e)})).finally((function(){t.updateForZeroLikes()}))},userID:K.userId});return t.generateCard()}$.setEventListeners(),new l(document).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUFkZExpa2UsIGhhbmRsZVJlbW92ZUxpa2UsIHVzZXJJRCB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXNBcnJheSA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQWRkTGlrZSA9IGhhbmRsZUFkZExpa2U7XG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSA9IGhhbmRsZVJlbW92ZUxpa2U7XG5cbiAgICB0aGlzLl91c2VyID0gdXNlcklEO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hbHQgPSBgSW1hZ2VuIGRlICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzID8gdGhpcy5fY2FyZExpa2VzIDogJyc7XG5cbiAgICBjb25zdCBoYXNVc2VyTGlrZWQgPSB0aGlzLl9saWtlc0FycmF5LnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2hlYXJ0JykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9faGVhcnRfYmxhY2snLCBoYXNVc2VyTGlrZWQpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faGVhcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblxuICAgICAgY29uc3QgaGFzVXNlckxpa2VkID0gdGhpcy5fbGlrZXNBcnJheS5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcik7XG5cbiAgICAgIGlmIChoYXNVc2VyTGlrZWQpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh7aWQ6IHRoaXMuX2lkfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHtpZDogdGhpcy5faWR9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9vcGVuSW1hZ2VQb3B1cCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHtpZDogdGhpcy5faWR9KTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VyKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGFkZExpa2VGaWx0ZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faGVhcnQnKS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19oZWFydF9ibGFjaycpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XG4gIH1cblxuICByZW1vdmVMaWtlRmlsdGVyKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2hlYXJ0JykuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9faGVhcnRfYmxhY2snKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlRm9yWmVyb0xpa2VzKCkge1xuICAgIGlmKHRoaXMuX2NhcmRMaWtlcyA9PT0gMCkge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG4gIH1cblxuICB1cGRhdGVMaWtlcyA9IChyZXNBcnJheSkgPT4ge1xuICAgIHRoaXMuX2xpa2VzQXJyYXkgPSByZXNBcnJheTtcbiAgICByZXR1cm4gdGhpcy5fbGlrZXNBcnJheTtcbiAgfTtcblxuICBfdHJhc2hCdG4oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKS5jbG9zZXN0KCcuZWxlbWVudCcpLnJlbW92ZSgpO1xuICB9XG5cbiAgX29wZW5JbWFnZVBvcHVwKCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7bGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZX0pO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb24pIHtcbiAgICB0aGlzLl92YWxpZGF0aW9uID0gdmFsaWRhdGlvbjtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fYnRuX2luYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfX2J0bl9pbmFjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0JykpO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J0bicpO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcblxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybScpKTtcblxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4nKTtcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fYnRuX2luYWN0aXZlJyk7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZpZWxkc2V0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX3NldCcpKTtcblxuICAgICAgZmllbGRzZXRMaXN0LmZvckVhY2goKGZpZWxkc2V0KSA9PiB7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZpZWxkc2V0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9kYXRhQXJyYXkgPSBkYXRhO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlcmVkSXRlbXMoKSB7XG4gICAgdGhpcy5fZGF0YUFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMucmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJbml0YWxJdGVtcyhlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZEl0ZW1zKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU91dHNpZGVDbGljayhldnQpIHtcbiAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX3NlY3Rpb24nKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2JhY2tncm91bmQnKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZU91dHNpZGVDbGljayhldnQpO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtcG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtcG9wdXBfX3RpdGxlJyk7XG4gIH1cblxuICBvcGVuKHtsaW5rLCBuYW1lfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBgSW1hZ2VuIGRlICR7bmFtZX1gO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBidG5Gb3JQb3B1cCwgc3VibWl0Q2FsbGJhY2sgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4nKVxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBzdWJtaXRDYWxsYmFjaztcbiAgICB0aGlzLl9idG5Gb3JQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnRuRm9yUG9wdXApO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0Jyk7XG4gICAgdGhpcy5mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLmZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnRuRm9yUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBzdXBlci5vcGVuKCk7XG4gICAgfSlcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4nKS5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fYnRuX2luYWN0aXZlJyk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciwgdXNlcklkIH0pIHtcbiAgICB0aGlzLl91c2VybmFtZSA9IG5hbWVTZWxlY3RvcjtcbiAgICB0aGlzLl9hYm91dCA9IGFib3V0U2VsZWN0b3I7XG4gICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSAgYXZhdGFyU2VsZWN0b3I7XG4gICAgdGhpcy5fdXNlcklEID0gdXNlcklkO1xuXG4gICAgdGhpcy5fbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUtaW5wdXQnKTtcbiAgICB0aGlzLl9hYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0LWlucHV0Jyk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUlucHV0LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYklucHV0LnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICBjb25zdCB7dXNlcm5hbWUsIGFib3V0fSA9IGRhdGFcbiAgICB0aGlzLl91c2VybmFtZS50ZXh0Q29udGVudCA9IHVzZXJuYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yLnNyYyA9IGF2YXRhclxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Ioe2Jhc2VVUkwsIGhlYWRlcnN9KSB7XG4gICAgdGhpcy5fYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmtcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy8ke2NhcmRJRH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZWRpdFByb2ZpbGVJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBhZGRMaWtlKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGVMaWtlKGNhcmRJRCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBhdmF0YXJJbWFnZShsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBsaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwe1xuICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgc3VibWl0QnV0dG9ufSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAnR3VhcmRhbmRvLi4uJztcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwb3B1cF9fYnRuX2luYWN0aXZlJylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ1PDrSc7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfX2J0bl9pbmFjdGl2ZScpXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbic7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZSc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0nO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8nO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaSc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uJztcblxuLy9HZW5lcmFsXG5jb25zdCByb290RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb290Jyk7XG5jb25zdCBwYWdlQ29udGFpbmVyID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcblxuLy9Qcm9maWxlIGNvbnRhaW5lclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdXRob3IgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdXRob3InKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dC1tZScpO1xuY29uc3QgcHJvZmlsZVBob3RvID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGhvdG8nKTtcblxuLy8gUG9wdXAgcHJvZmlsZVxuY29uc3QgcHJvZmlsZUNvbnRhaW5lciA9IHBhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignI3BvcHVwX19wcm9maWxlLWZvcm0nKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fcHJvZmlsZScpO1xuZXhwb3J0IGNvbnN0IGlucHV0UHJvZmlsZU5hbWUgPSBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNuYW1lLWlucHV0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRQcm9maWxlQWJvdXQgPSBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGNsb3NlUHJvZmlsZUJ0biA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Byb2ZpbGUtY2xvc2UtYnRuJyk7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xuZXhwb3J0IGNvbnN0IHN1Ym1pdFByb2ZpbGVCdG4gPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4nKTtcblxuLy8gUG9wdXAgcGxhY2VcbmV4cG9ydCBjb25zdCBwbGFjZXNDb250YWluZXIgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fcGxhY2VzLWZvcm0nKTtcbmV4cG9ydCBjb25zdCBwb3B1cFBsYWNlcyA9IHBhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignI3BvcHVwX19jYXJkcycpO1xuZXhwb3J0IGNvbnN0IGNsb3NlUGxhY2VzQnRuID0gcG9wdXBQbGFjZXMucXVlcnlTZWxlY3RvcignLnBvcHVwX19wbGFjZXMtY2xvc2UtYnRuJyk7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ0biA9IHBhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcbmV4cG9ydCBjb25zdCBpbnB1dFBsYWNlTmFtZSA9IHBsYWNlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3BsYWNlJyk7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZUxpbmsgPSBwbGFjZXNDb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwX191cmwnKTtcblxuLy8gUG9wdXAgaW1hZ2VcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjaW1hZ2UtcG9wdXAnKTtcblxuLy8gUG9wdXAgZGVsZXRlIGNhcmRcbmNvbnN0IHBvcHVwRGVsZXRlID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2RlbGV0ZScpO1xuY29uc3QgcG9wdXBEZWxldGVDb25maXJtQnRuID0gcG9wdXBEZWxldGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb25maXJtLWJ0bicpO1xuXG4vLyBOdWV2byBDb2RpZ29cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBwcm9maWxlQXV0aG9yLFxuICBhYm91dFNlbGVjdG9yOiBwcm9maWxlQWJvdXQsXG4gIGF2YXRhclNlbGVjdG9yOiBwcm9maWxlUGhvdG9cbn0pO1xuXG5jb25zdCByZW1vdmVDYXJkID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XG4gIHBvcHVwU2VsZWN0b3I6ICcjcG9wdXBfX2RlbGV0ZScsXG4gIHN1Ym1pdEJ1dHRvbjogcG9wdXBEZWxldGVDb25maXJtQnRuXG59KTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI2ltYWdlLXBvcHVwJyk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnJlbW92ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVUkw6ICdodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18wNycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnYjdlNzEyODQtNDAyMC00NGY0LWE4MGYtNDM3MjJjNWIzZWNlJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG5jb25zdCBlZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJyNwb3B1cF9fcHJvZmlsZScsXG4gIGJ0bkZvclBvcHVwOiAnLnByb2ZpbGVfX2VkaXQtYnRuJyxcbiAgc3VibWl0Q2FsbGJhY2s6IChkYXRhKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZWRpdFByb2ZpbGVJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe3VzZXJuYW1lOiByZXMubmFtZSwgYWJvdXQ6IHJlcy5hYm91dH0pO1xuICAgICAgICBlZGl0UHJvZmlsZS5jbG9zZSgpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgfVxufSk7XG5lZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXMpID0+IHtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe3VzZXJuYW1lOiByZXMubmFtZSwgYWJvdXQ6IHJlcy5hYm91dH0pO1xuICBwcm9maWxlSW5mby51c2VySWQgPSByZXMuX2lkO1xufSlcbi50aGVuKCgpID0+IHtcbiAgYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4ge1xuICAgIGNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICAgICAgZGF0YTogcmVzLFxuICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSW5pdGFsSXRlbXMoY2FyZEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sICcjZWxlbWVudHMnKVxuXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVyZWRJdGVtcygpO1xuXG4gICAgY29uc3QgYWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgIHBvcHVwU2VsZWN0b3I6ICcjcG9wdXBfX2NhcmRzJyxcbiAgICAgIGJ0bkZvclBvcHVwOiAnLnByb2ZpbGVfX2FkZC1idG4nLFxuICAgICAgc3VibWl0Q2FsbGJhY2s6IChkYXRhKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5hZGROZXdDYXJkKGRhdGEubmFtZSwgZGF0YS5saW5rKVxuICAgICAgICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZCk7XG4gICAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtcyhuZXdDYXJkRWxlbWVudCk7XG4gICAgICAgICAgICBhZGRDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgfSlcbn0pO1xuXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJyNwb3B1cF9fYXZhdGFyLWltYWdlJyxcbiAgYnRuRm9yUG9wdXA6ICcucHJvZmlsZV9fY29udGFpbmVyJyxcbiAgc3VibWl0Q2FsbGJhY2s6IChhdmF0YXIpID0+IHtcbiAgICBhcGlcbiAgICAgIC5hdmF0YXJJbWFnZShhdmF0YXIubGluaylcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckF2YXRhcihhdmF0YXIubGluaylcbiAgICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2UoKVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxufSlcbmNoYW5nZUF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZGF0YSAsICcjZWxlbWVudC10ZW1wbGF0ZScsIHtcbiAgICBoYW5kbGVDYXJkQ2xpY2s6KHtuYW1lLCBsaW5rfSkgPT4ge1xuICAgICAgaW1hZ2VQb3B1cC5vcGVuKHtuYW1lLCBsaW5rfSlcbiAgICB9LFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoe2lkfSkgPT4ge1xuICAgICAgcmVtb3ZlQ2FyZC5vcGVuKCk7XG4gICAgICByZW1vdmVDYXJkLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICByZW1vdmVDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgbmV3Q2FyZC5fdHJhc2hCdG4oKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVBZGRMaWtlOiAoe2lkfSkgPT4ge1xuICAgICAgYXBpLmFkZExpa2UoaWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBuZXdDYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XG4gICAgICAgIG5ld0NhcmQuYWRkTGlrZUZpbHRlcigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICB9LFxuICAgIGhhbmRsZVJlbW92ZUxpa2U6ICh7aWR9KSA9PiB7XG4gICAgICBhcGkuZGVsZXRlTGlrZShpZCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIG5ld0NhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcbiAgICAgICAgbmV3Q2FyZC5yZW1vdmVMaWtlRmlsdGVyKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIG5ld0NhcmQudXBkYXRlRm9yWmVyb0xpa2VzKCk7XG4gICAgICB9KVxuICAgIH0sXG4gICAgdXNlcklEOiBwcm9maWxlSW5mby51c2VySWRcbiAgfSk7XG5cbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG4vLyBJbnB1dCB2YWxpZGF0aW9uc1xuY29uc3QgdmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGRvY3VtZW50KTtcbnZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsIl9yZWYiLCJfdGhpcyIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlQWRkTGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJ1c2VySUQiLCJfY2xhc3NDYWxsQ2hlY2siLCJyZXNBcnJheSIsIl9saWtlc0FycmF5IiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImxpa2VzIiwiX2NhcmRMaWtlcyIsImxlbmd0aCIsIl9vd25lcklkIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVBZGRMaWtlIiwiX2hhbmRsZVJlbW92ZUxpa2UiLCJfdXNlciIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl90aGlzMiIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJjb25jYXQiLCJoYXNVc2VyTGlrZWQiLCJzb21lIiwibGlrZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl90aGlzMyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpZCIsIl9vcGVuSW1hZ2VQb3B1cCIsInJlbW92ZSIsImFkZCIsImNsb3Nlc3QiLCJGb3JtVmFsaWRhdG9yIiwiX2NyZWF0ZUNsYXNzIiwidmFsaWRhdGlvbiIsIl9kZWZpbmVQcm9wZXJ0eSIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImZpZWxkc2V0IiwiX3ZhbGlkYXRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9kYXRhQXJyYXkiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX2hhbmRsZU91dHNpZGVDbGljayIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImJ0bkZvclBvcHVwIiwic3VibWl0Q2FsbGJhY2siLCJfZm9ybSIsIl9idXR0b25TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9idG5Gb3JQb3B1cCIsIl9pbnB1dExpc3QiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwidXNlcklkIiwiX3VzZXJuYW1lIiwiX2Fib3V0IiwiX2F2YXRhclNlbGVjdG9yIiwiX3VzZXJJRCIsIl9uYW1lSW5wdXQiLCJfYWJvdXRJbnB1dCIsImFib3V0IiwiX2pvYklucHV0IiwidXNlcm5hbWUiLCJhdmF0YXIiLCJBcGkiLCJiYXNlVVJMIiwiaGVhZGVycyIsIl9iYXNlVVJMIiwiX2hlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSUQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsInJlbmRlckxvYWRpbmciLCJhY3Rpb24iLCJpc0xvYWRpbmciLCJwYWdlQ29udGFpbmVyIiwicHJvZmlsZUF1dGhvciIsInByb2ZpbGVBYm91dCIsInByb2ZpbGVQaG90byIsInByb2ZpbGVDb250YWluZXIiLCJwb3B1cFByb2ZpbGUiLCJwbGFjZXNDb250YWluZXIiLCJwb3B1cERlbGV0ZUNvbmZpcm1CdG4iLCJwcm9maWxlSW5mbyIsInJlbW92ZUNhcmQiLCJpbWFnZVBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZWRpdFByb2ZpbGUiLCJlZGl0UHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZFNlY3Rpb24iLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJhZGRJbml0YWxJdGVtcyIsInJlbmRlcmVkSXRlbXMiLCJhZGRDYXJkIiwiYWRkTmV3Q2FyZCIsImNhcmQiLCJuZXdDYXJkRWxlbWVudCIsImFkZEl0ZW1zIiwiY2hhbmdlQXZhdGFyUG9wdXAiLCJhdmF0YXJJbWFnZSIsInNldFVzZXJBdmF0YXIiLCJuZXdDYXJkIiwib3BlbiIsIl9yZWYyIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsZXRlQ2FyZCIsIl90cmFzaEJ0biIsIl9yZWYzIiwiYWRkTGlrZSIsInVwZGF0ZUxpa2VzIiwiYWRkTGlrZUZpbHRlciIsIl9yZWY0IiwiZGVsZXRlTGlrZSIsInJlbW92ZUxpa2VGaWx0ZXIiLCJmaW5hbGx5IiwidXBkYXRlRm9yWmVyb0xpa2VzIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=