!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var r=function(){function e(t,r,o){var i,u,c,a=this,l=o.handleCardClick,s=o.handleDeleteClick,f=o.handleAddLike,p=o.handleRemoveLike,y=o.userID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,c=function(e){return a._likesArray=e,a._likesArray},(u=n(u="updateLikes"))in i?Object.defineProperty(i,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[u]=c,this._name=t.name,this._link=t.link,this._id=t.id,this._likesArray=t.likes,this._cardLikes=this._likesArray.length,this._ownerId=t.owner._id,this._cardSelector=r,this._handleCardClick=l,this._handleDeleteClick=s,this._handleAddLike=f,this._handleRemoveLike=p,this._user=y,this._heartButton=document.querySelector(".element__heart")}var r,o;return r=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__name").textContent=this._name,this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__image").alt="Imagen de ".concat(this._name),this._element.querySelector(".element__like-counter").textContent=this._cardLikes?this._cardLikes:"";var t=this._likesArray.some((function(t){return t._id===e._user}));return this._element.querySelector(".element__heart").classList.toggle("element__heart_black",t),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__heart").addEventListener("click",(function(){e._likesArray.some((function(t){return t._id===e._user}))?e._handleRemoveLike({id:e._id}):e._handleAddLike({id:e._id})})),this._element.querySelector(".element__image").addEventListener("click",(function(){e._openImagePopup()})),this._element.querySelector(".element__trash").addEventListener("click",(function(){e._handleDeleteClick({id:e._id})})),this._ownerId!==this._user&&this._element.querySelector(".element__trash").remove()}},{key:"_addLike",value:function(){this._element.querySelector(".element__heart").classList.add("element__heart_black"),this._element.querySelector(".element__like-counter").textContent=this._likesArray.length}},{key:"_removeLike",value:function(){this._element.querySelector(".element__heart").classList.remove("element__heart_black"),this._element.querySelector(".element__like-counter").textContent=this._likesArray.length,"0"===this._cardLikes&&(this._element.querySelector(".element__like-counter").textContent="")}},{key:"_trashBtn",value:function(){this._element.querySelector(".element__trash").closest(".element").remove()}},{key:"_openImagePopup",value:function(){this._handleCardClick({link:this._link,name:this._name})}}])&&t(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var l=u((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_showInputError",(function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),r.textContent=n,r.classList.add("form__input-error_active")})),c(this,"_hideInputError",(function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""})),c(this,"_checkInputValidity",(function(e,t){t.validity.valid?n._hideInputError(e,t):n._showInputError(e,t,t.validationMessage)})),c(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),c(this,"_toggleButtonState",(function(e,t){n._hasInvalidInput(e)?t.classList.add("popup__btn_inactive"):t.classList.remove("popup__btn_inactive")})),c(this,"_setEventListeners",(function(e){var t=Array.from(e.querySelectorAll(".form__input")),r=e.querySelector(".popup__btn");n._toggleButtonState(t,r),t.forEach((function(o){o.addEventListener("input",(function(){n._checkInputValidity(e,o),n._toggleButtonState(t,r)}))}))})),c(this,"enableValidation",(function(){Array.from(document.querySelectorAll(".form")).forEach((function(e){var t=e.querySelector(".popup__btn");e.addEventListener("submit",(function(e){t.classList.add("popup__btn_inactive"),e.preventDefault()})),Array.from(e.querySelectorAll(".form__set")).forEach((function(e){n._setEventListeners(e)}))}))})),this._validation=t}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataArray=r,this.renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderedItems",value:function(){var e=this;this._dataArray.forEach((function(t){e.renderer(t)}))}},{key:"addInitalItems",value:function(e){this._container.append(e)}},{key:"addItems",value:function(e){this._container.prepend(e)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){if("Escape"===e.key)return this.close()}},{key:"_handleOutsideClick",value:function(e){(e.target.classList.contains("popup__section")||e.target.classList.contains("popup__background"))&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".popup__close-btn").addEventListener("click",(function(){e.close()})),document.addEventListener("keydown",(function(t){e._handleEscClose(t)})),this._popupElement.addEventListener("click",(function(t){e._handleOutsideClick(t)}))}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popupElement.querySelector(".image-popup__image"),t._popupTitle=t._popupElement.querySelector(".image-popup__title"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;b(S(u.prototype),"open",this).call(this),this._popupImage.src=t,this._popupImage.alt="Imagen de ".concat(n),this._popupTitle.textContent=n,b(S(u.prototype),"setEventListeners",this).call(this)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupSelector,r=e.submitCallback;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._form=t._popupElement.querySelector(".form"),t._buttonSubmit=t._popupElement.querySelector(".popup__btn"),t._handleFormSubmit=r,t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this.formValues={},this._inputList.forEach((function(t){e.formValues[t.name]=t.value})),this.formValues}},{key:"setEventListeners",value:function(){var e=this;E(j(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){E(j(u.prototype),"close",this).call(this),this._form.reset(),this._popupElement.querySelector(".popup__btn").classList.add("popup__btn_inactive")}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var C=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector,i=t.userID;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._username=n,this._about=r,this._avatarSelector=o,this._userID=i,this._nameInput=document.querySelector("#name-input"),this._aboutInput=document.querySelector("#about-input")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameInput.textContent,about:this._jobInput.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.about;this._username.textContent=t,this._about.textContent=n}},{key:"setUserAvatar",value:function(e){this._avatarSelector.src=e}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var T=function(){function e(t){var n=t.baseURL,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=n,this._headers=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseURL,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseURL,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseURL,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseURL,"/users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editProfileInfo",value:function(e,t){return fetch("".concat(this._baseURL,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this._baseURL,"/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseURL,"/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"avatarImage",value:function(e){return fetch("".concat(this._baseURL,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._submitButton=o,t}return t=u,(n=[{key:"close",value:function(){x(B(u.prototype),"close",this).call(this),this.renderLoading(!1)}},{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){e&&(this._submitButton.textContent="Guardando...",this._submitButton.classList.add("popup__btn_inactive"))}},{key:"setEventListeners",value:function(){var e=this;x(B(u.prototype),"setEventListeners",this).call(this),this._submitButton.addEventListener("click",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit()}))}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h),F=document.querySelector(".root").querySelector(".page"),N=F.querySelector(".profile__author"),G=F.querySelector(".profile__about-me"),J=(F.querySelector(".profile__container"),F.querySelector("#popup__avatar-image"),F.querySelector("#popup__profile-form")),H=F.querySelector("#popup__profile"),z=(J.querySelector("#name-input"),J.querySelector("#about-input"),H.querySelector(".popup__profile-close-btn"),F.querySelector(".profile__edit-btn")),M=H.querySelector(".popup__btn"),K=F.querySelector("#popup__places-form"),Q=F.querySelector("#popup__cards"),W=(Q.querySelector(".popup__places-close-btn"),F.querySelector(".profile__add-btn"));K.querySelector(".popup__place"),K.querySelector(".popup__url"),K.querySelector(".popup__btn"),F.querySelector("#image-popup"),document.querySelector(".profile__container").addEventListener("click",(function(){document.querySelector("#popup__avatar-image").classList.add("popup_opened")}));var X=new C({nameSelector:N,aboutSelector:G,avatarSelector:document.querySelector(".profile__photo")}),Y=new V({popupSelector:"#popup__delete",submitButton:document.querySelector(".popup__confirm-btn")}),Z=new g("#image-popup");Z.setEventListeners(),Y.setEventListeners();var $=new T({baseURL:"https://around.nomoreparties.co/v1/web_es_07",headers:{authorization:"b7e71284-4020-44f4-a80f-43722c5b3ece","Content-Type":"application/json"}}),ee=new P({popupSelector:"#popup__profile",submitCallback:function(e){$.editProfileInfo(e.name,e.about).then((function(e){X.setUserInfo({username:e.name,about:e.about}),ee.close()})).catch((function(e){return console.log(e)}))}});function te(e){var t=new r(e,"#element-template",{handleCardClick:function(e){var t=e.name,n=e.link;Z.open({name:t,link:n})},handleDeleteClick:function(e){var n=e.id;Y.open(),Y.setSubmitAction((function(){$.deleteCard(n).then((function(){Y.close(),t._trashBtn()})).catch((function(e){return console.log(e)}))}))},handleAddLike:function(e){var n=e.id;console.log(n),$.addLike(n).then((function(e){t.updateLikes(e.likes),t._addLike()})).catch((function(e){return console.log(e)}))},handleRemoveLike:function(e){var n=e.id;$.deleteLike(n).then((function(e){t.updateLikes(e.likes),t._removeLike()})).catch((function(e){return console.log(e)}))},userID:X.userID});return t.generateCard()}ee.setEventListeners(),$.getUserInfo().then((function(e){X.setUserInfo({username:e.name,about:e.about}),X.userID=e._id})).then((function(){$.getInitialCards().then((function(e){console.log(e);var t=new p({data:e,renderer:function(e){var n=te(e);t.addInitalItems(n)}},"#elements");t.renderedItems();var n=new P({popupSelector:"#popup__cards",submitCallback:function(e){$.addNewCard(e.name,e.popup__link).then((function(e){var r=te(e);t.addItems(r),n.close()})).catch((function(e){return console.log(e)}))}});n.setEventListeners()}))})),W.addEventListener("click",(function(){Q.classList.toggle("popup_opened")})),z.addEventListener("click",(function(){H.classList.add("popup_opened"),M.classList.add("popup__btn_inactive")})),new l(document).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0QjJCLEVBQVlRLFlBQVksQ0FBQzdDLFNBQVVVLEVBQUloSSxLQUFNb0gsTUFBT1ksRUFBSVosUUFFeER1QyxFQUFZakssT0FBU3NJLEVBQUk3SCxHQUMzQixJQUNDNEgsTUFBSyxXQUNKZ0MsRUFBSXlCLGtCQUFrQnpELE1BQUssU0FBQ0MsR0FDMUJzQyxRQUFRQyxJQUFJdkMsR0FDWixJQUFNeUQsRUFBYyxJQUFJckgsRUFBUSxDQUM5QmxGLEtBQU04SSxFQUNOMUQsU0FBVSxTQUFDcEYsR0FDVCxJQUFNd00sRUFBY2xCLEdBQVd0TCxHQUMvQnVNLEVBQVlFLGVBQWVELEVBQzdCLEdBQ0MsYUFFSEQsRUFBWUcsZ0JBRVosSUFBTUMsRUFBVSxJQUFJN0YsRUFBYyxDQUNoQ2xCLGNBQWUsZ0JBQ2ZtQixlQUFnQixTQUFDL0csR0FDZjZLLEVBQ0crQixXQUFXNU0sRUFBS2MsS0FBTWQsRUFBa0IsYUFDeEM2SSxNQUFLLFNBQUNnRSxHQUNMLElBQU1DLEVBQWlCeEIsR0FBV3VCLEdBQ2xDTixFQUFZUSxTQUFTRCxHQUNyQkgsRUFBUTNHLE9BQ1YsSUFDQ2tGLE9BQU0sU0FBQ0MsR0FBRyxPQUFLQyxRQUFRQyxJQUFJRixFQUFJLEdBQ3BDLElBR0Z3QixFQUFRL0IsbUJBRVYsR0FDRixJQThGQUosRUFBV3JILGlCQUFpQixTQUpBLFdBQzFCb0gsRUFBWXZILFVBQVVDLE9BQU8sZUFDL0IsSUFTQW1ILEVBQWVqSCxpQkFBaUIsU0FMUCxXQUN2QmdILEVBQWFuSCxVQUFVTSxJQUFJLGdCQUMzQitHLEVBQWlCckgsVUFBVU0sSUFBSSxzQkFDakMsSUFZbUIsSUFBSUUsRUFBY3pCLFVBRzFCaUwsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvcGFnZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUFkZExpa2UsIGhhbmRsZVJlbW92ZUxpa2UsIHVzZXJJRCB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5pZDtcbiAgICB0aGlzLl9saWtlc0FycmF5ID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9saWtlc0FycmF5Lmxlbmd0aDtcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG5cbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlID0gaGFuZGxlUmVtb3ZlTGlrZTtcblxuICAgIHRoaXMuX3VzZXIgPSB1c2VySUQ7XG5cbiAgICB0aGlzLl9oZWFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydCcpO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hbHQgPSBgSW1hZ2VuIGRlICR7dGhpcy5fbmFtZX1gO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzID8gdGhpcy5fY2FyZExpa2VzIDogJyc7XG5cbiAgICBjb25zdCBoYXNVc2VyTGlrZWQgPSB0aGlzLl9saWtlc0FycmF5LnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydCcpLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2hlYXJ0X2JsYWNrJywgaGFzVXNlckxpa2VkKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2hlYXJ0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBoYXNVc2VyTGlrZWQgPSB0aGlzLl9saWtlc0FycmF5LnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VyKTtcbiAgICAgICAgaWYgKGhhc1VzZXJMaWtlZCkge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2Uoe2lkOiB0aGlzLl9pZH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2Uoe2lkOiB0aGlzLl9pZH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fb3BlbkltYWdlUG9wdXAoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh7aWQ6IHRoaXMuX2lkfSk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcikge1xuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKS5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBfYWRkTGlrZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydCcpLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2hlYXJ0X2JsYWNrJyk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0FycmF5Lmxlbmd0aDtcbiAgfVxuXG4gIF9yZW1vdmVMaWtlKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2hlYXJ0JykuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudF9faGVhcnRfYmxhY2snKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xuICAgIGlmKHRoaXMuX2NhcmRMaWtlcyA9PT0gJzAnKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUxpa2VzID0gKHJlc0FycmF5KSA9PiB7XG4gICAgdGhpcy5fbGlrZXNBcnJheSA9IHJlc0FycmF5O1xuICAgIHJldHVybiB0aGlzLl9saWtlc0FycmF5O1xuICB9O1xuXG4gIF90cmFzaEJ0bigpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190cmFzaCcpLmNsb3Nlc3QoJy5lbGVtZW50JykucmVtb3ZlKCk7XG4gIH1cblxuICBfb3BlbkltYWdlUG9wdXAoKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lfSk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbikge1xuICAgIHRoaXMuX3ZhbGlkYXRpb24gPSB2YWxpZGF0aW9uO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19idG5faW5hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9fYnRuX2luYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnRuJyk7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtJykpO1xuXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J0bicpO1xuICAgICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19idG5faW5hY3RpdmUnKTtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9fc2V0JykpO1xuXG4gICAgICBmaWVsZHNldExpc3QuZm9yRWFjaCgoZmllbGRzZXQpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZmllbGRzZXQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2RhdGFBcnJheSA9IGRhdGE7XG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVyZWRJdGVtcygpIHtcbiAgICB0aGlzLl9kYXRhQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEluaXRhbEl0ZW1zKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgYWRkSXRlbXMoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlT3V0c2lkZUNsaWNrKGV2dCkge1xuICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fc2VjdGlvbicpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fYmFja2dyb3VuZCcpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlT3V0c2lkZUNsaWNrKGV2dCk7XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1wb3B1cF9fdGl0bGUnKTtcbiAgfVxuXG4gIG9wZW4oe2xpbmssIG5hbWV9KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGBJbWFnZW4gZGUgJHtuYW1lfWA7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrIH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnRuJylcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gc3VibWl0Q2FsbGJhY2s7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcbiAgICB0aGlzLmZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnRuJykuY2xhc3NMaXN0LmFkZCgncG9wdXBfX2J0bl9pbmFjdGl2ZScpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IsIHVzZXJJRCB9KSB7XG4gICAgdGhpcy5fdXNlcm5hbWUgPSBuYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dFNlbGVjdG9yO1xuICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gIGF2YXRhclNlbGVjdG9yO1xuICAgIHRoaXMuX3VzZXJJRCA9IHVzZXJJRDtcblxuICAgIHRoaXMuX25hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lLWlucHV0Jyk7XG4gICAgdGhpcy5fYWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1pbnB1dCcpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVJbnB1dC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9qb2JJbnB1dC50ZXh0Q29udGVudFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgY29uc3Qge3VzZXJuYW1lLCBhYm91dH0gPSBkYXRhXG4gICAgdGhpcy5fdXNlcm5hbWUudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmMgPSBhdmF0YXJcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHtiYXNlVVJMLCBoZWFkZXJzfSkge1xuICAgIHRoaXMuX2Jhc2VVUkwgPSBiYXNlVVJMO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZihyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSUR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZihyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZihyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGVkaXRQcm9maWxlSW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0XG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZShjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vbGlrZXMvJHtjYXJkSUR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlTGlrZShjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vbGlrZXMvJHtjYXJkSUR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYXZhdGFySW1hZ2UobGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZihyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cHtcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHN1Ym1pdEJ1dHRvbn0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBzdWJtaXRCdXR0b247XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ0d1YXJkYW5kby4uLic7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCgncG9wdXBfX2J0bl9pbmFjdGl2ZScpXG4gICAgfSAvKmVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uLmRhdGFzZXQudGV4dGNvbnRlbnQ7XG4gICAgfSovXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybSc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mbyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24nO1xuXG4vL0dlbmVyYWxcbmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJvb3QnKTtcbmNvbnN0IHBhZ2VDb250YWluZXIgPSByb290RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xuXG4vL1Byb2ZpbGUgY29udGFpbmVyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF1dGhvciA9IHBhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F1dGhvcicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IHBhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0LW1lJyk7XG5jb25zdCBwcm9maWxlQXZhdGFyQ29udGFpbmVyID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fY29udGFpbmVyJyk7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2F2YXRhci1pbWFnZScpXG5cbi8vIFBvcHVwIHByb2ZpbGVcbmNvbnN0IHByb2ZpbGVDb250YWluZXIgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fcHJvZmlsZS1mb3JtJyk7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX3Byb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFByb2ZpbGVOYW1lID0gcHJvZmlsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjbmFtZS1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0UHJvZmlsZUFib3V0ID0gcHJvZmlsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYWJvdXQtaW5wdXQnKTtcbmV4cG9ydCBjb25zdCBjbG9zZVByb2ZpbGVCdG4gPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcm9maWxlLWNsb3NlLWJ0bicpO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnRuID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcbmV4cG9ydCBjb25zdCBzdWJtaXRQcm9maWxlQnRuID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnRuJyk7XG5cbi8vIFBvcHVwIHBsYWNlXG5leHBvcnQgY29uc3QgcGxhY2VzQ29udGFpbmVyID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX3BsYWNlcy1mb3JtJyk7XG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZXMgPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fY2FyZHMnKTtcbmV4cG9ydCBjb25zdCBjbG9zZVBsYWNlc0J0biA9IHBvcHVwUGxhY2VzLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGxhY2VzLWNsb3NlLWJ0bicpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRCdG4gPSBwYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZU5hbWUgPSBwbGFjZXNDb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19wbGFjZScpO1xuZXhwb3J0IGNvbnN0IGlucHV0UGxhY2VMaW5rID0gcGxhY2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdXJsJyk7XG5jb25zdCBzdWJtaXRQbGFjZXNCdG4gPSBwbGFjZXNDb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19idG4nKTtcblxuLy8gUG9wdXAgaW1hZ2VcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gcGFnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjaW1hZ2UtcG9wdXAnKTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2NvbnRhaW5lcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBwcnVlYmEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2F2YXRhci1pbWFnZScpO1xuICBwcnVlYmEuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG59KVxuXG4vLyBJbml0aWFsIGNhcmRzXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAnVmFsbGUgZGUgWW9zZW1pdGUnLFxuICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGFnbyBMb3Vpc2UnLFxuICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTW9udGHDsWFzIENhbHZhcycsXG4gICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYXRlbWFyJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGcnXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2UnLFxuICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZydcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYWdvIGRpIEJyYWllcycsXG4gICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnJ1xuICB9XG5dO1xuXG4vLyBOdWV2byBDb2RpZ29cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBwcm9maWxlQXV0aG9yLFxuICBhYm91dFNlbGVjdG9yOiBwcm9maWxlQWJvdXQsXG4gIGF2YXRhclNlbGVjdG9yOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGhvdG8nKVxufSk7XG5cbmNvbnN0IHJlbW92ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcbiAgcG9wdXBTZWxlY3RvcjogJyNwb3B1cF9fZGVsZXRlJyxcbiAgc3VibWl0QnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbmZpcm0tYnRuJylcbn0pO1xuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcjaW1hZ2UtcG9wdXAnKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucmVtb3ZlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVSTDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzA3JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdiN2U3MTI4NC00MDIwLTQ0ZjQtYTgwZi00MzcyMmM1YjNlY2UnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmNvbnN0IGVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnI3BvcHVwX19wcm9maWxlJyxcbiAgc3VibWl0Q2FsbGJhY2s6IChkYXRhKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZWRpdFByb2ZpbGVJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe3VzZXJuYW1lOiByZXMubmFtZSwgYWJvdXQ6IHJlcy5hYm91dH0pO1xuICAgICAgICBlZGl0UHJvZmlsZS5jbG9zZSgpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgfVxufSk7XG5lZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXMpID0+IHtcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe3VzZXJuYW1lOiByZXMubmFtZSwgYWJvdXQ6IHJlcy5hYm91dH0pO1xuICAvKnByb2ZpbGVJbmZvLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7Ki9cbiAgcHJvZmlsZUluZm8udXNlcklEID0gcmVzLl9pZDtcbn0pXG4udGhlbigoKSA9PiB7XG4gIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IHtcbiAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gICAgICBkYXRhOiByZXMsXG4gICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJbml0YWxJdGVtcyhjYXJkRWxlbWVudCk7XG4gICAgICB9XG4gICAgfSwgJyNlbGVtZW50cycpXG5cbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJlZEl0ZW1zKCk7XG5cbiAgICBjb25zdCBhZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgcG9wdXBTZWxlY3RvcjogJyNwb3B1cF9fY2FyZHMnLFxuICAgICAgc3VibWl0Q2FsbGJhY2s6IChkYXRhKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5hZGROZXdDYXJkKGRhdGEubmFtZSwgZGF0YVsncG9wdXBfX2xpbmsnXSlcbiAgICAgICAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3Q2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmQpO1xuICAgICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbXMobmV3Q2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgYWRkQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIH0pXG59KVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGRhdGEgLCAnI2VsZW1lbnQtdGVtcGxhdGUnLCB7XG4gICAgaGFuZGxlQ2FyZENsaWNrOih7bmFtZSwgbGlua30pID0+IHtcbiAgICAgIGltYWdlUG9wdXAub3Blbih7bmFtZSwgbGlua30pXG4gICAgfSxcbiAgICBoYW5kbGVEZWxldGVDbGljazogKHtpZH0pID0+IHtcbiAgICAgIHJlbW92ZUNhcmQub3BlbigpO1xuICAgICAgcmVtb3ZlQ2FyZC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVtb3ZlQ2FyZC5jbG9zZSgpO1xuICAgICAgICAgIG5ld0NhcmQuX3RyYXNoQnRuKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlQWRkTGlrZTogKHtpZH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGlkKVxuICAgICAgYXBpLmFkZExpa2UoaWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBuZXdDYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XG4gICAgICAgIG5ld0NhcmQuX2FkZExpa2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfSxcbiAgICBoYW5kbGVSZW1vdmVMaWtlOiAoe2lkfSkgPT4ge1xuICAgICAgYXBpLmRlbGV0ZUxpa2UoaWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBuZXdDYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XG4gICAgICAgIG5ld0NhcmQuX3JlbW92ZUxpa2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfSxcbiAgICB1c2VySUQ6IHByb2ZpbGVJbmZvLnVzZXJJRFxuICB9KTtcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG4vLyBSZW5kZXIgaW5pdGlhbCBjYXJkc1xuLypjb25zdCBpbml0aWFsQ2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGRhdGE6IGluaXRpYWxDYXJkcyxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdENhcmQgPSBuZXcgQ2FyZChpdGVtLCAnI2VsZW1lbnQtdGVtcGxhdGUnLCB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6IChsaW5rLCBuYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNpbWFnZS1wb3B1cCcsIGxpbmssIG5hbWUpO1xuICAgICAgICBwb3B1cEltYWdlLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBkZWZhdWx0RWxlbWVudENhcmQgPSBkZWZhdWx0Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICBpbml0aWFsQ2FyZExpc3QuYWRkSW5pdGFsSXRlbXMoZGVmYXVsdEVsZW1lbnRDYXJkKTtcbiAgfVxufSwgJyNlbGVtZW50cycpO1xuXG5pbml0aWFsQ2FyZExpc3QucmVuZGVyZWRJdGVtcygpO1xuXG4vLyBDcmVhdGUgbmV3IGNhcmRzXG5mdW5jdGlvbiBjcmVhdGVDYXJkcyhpdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCAnI2VsZW1lbnQtdGVtcGxhdGUnLCB7XG4gICAgaGFuZGxlQ2FyZENsaWNrOiAobGluaywgbmFtZSkgPT4ge1xuICAgICAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI2ltYWdlLXBvcHVwJywgbGluaywgbmFtZSk7XG4gICAgICBpbWFnZVBvcHVwLm9wZW4oKTtcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICBpbml0aWFsQ2FyZExpc3QuYWRkSXRlbXMoY2FyZEVsZW1lbnQpO1xufVxuXG5jb25zdCBjYXJkc0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcjcG9wdXBfX2NhcmRzJyxcbiAgc3VibWl0Q2FsbGJhY2s6IChpdGVtKSA9PiB7XG4gICAgY3JlYXRlQ2FyZHMoaXRlbSk7XG4gICAgY2FyZHNGb3JtLmNsb3NlKCk7XG4gIH1cbn0pO1xuXG5jYXJkc0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gQ2hhbmdlIHVzZXIgaW5mb3JtYXRpb25cbi8qY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJyNwb3B1cF9fcHJvZmlsZScsXG4gIHN1Ym1pdENhbGxiYWNrOiAoKSA9PiB7XG4gICAgY29uc3Qgc2V0SW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgICBuYW1lU2VsZWN0b3I6IHByb2ZpbGVBdXRob3IsXG4gICAgICBhYm91dFNlbGVjdG9yOiBwcm9maWxlQWJvdXRcbiAgICB9KVxuICAgIHNldEluZm8uc2V0VXNlckluZm8oKTtcbiAgfVxufSk7XG5cbnVzZXJJbmZvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTsqL1xuXG5jb25zdCB0b2dnbGVBZGRDYXJkc1BvcHVwID0gKCkgPT4ge1xuICBwb3B1cFBsYWNlcy5jbGFzc0xpc3QudG9nZ2xlKCdwb3B1cF9vcGVuZWQnKTtcbn1cblxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUFkZENhcmRzUG9wdXApO1xuXG5jb25zdCBvcGVuUHJvZmlsZVBvcHVwID0gKCkgPT4ge1xuICBwb3B1cFByb2ZpbGUuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIHN1Ym1pdFByb2ZpbGVCdG4uY2xhc3NMaXN0LmFkZCgncG9wdXBfX2J0bl9pbmFjdGl2ZScpO1xufVxuXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qcm9maWxlUG9wdXApO1xuXG4vKmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOZXdDYXJkKGNhcmQpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsICcjZWxlbWVudC10ZW1wbGF0ZScpO1xuICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VsZW1lbnRzJykucHJlcGVuZChuZXdDYXJkRWxlbWVudCk7XG59Ki9cblxuLy8gSW5wdXQgdmFsaWRhdGlvbnNcbmNvbnN0IHZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihkb2N1bWVudCk7XG5cblxudmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7Il0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiX3JlZiIsIl90aGlzIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsInVzZXJJRCIsIl9jbGFzc0NhbGxDaGVjayIsInJlc0FycmF5IiwiX2xpa2VzQXJyYXkiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiaWQiLCJsaWtlcyIsIl9jYXJkTGlrZXMiLCJsZW5ndGgiLCJfb3duZXJJZCIsIm93bmVyIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlQWRkTGlrZSIsIl9oYW5kbGVSZW1vdmVMaWtlIiwiX3VzZXIiLCJfaGVhcnRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJrZXkiLCJ2YWx1ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGhpczIiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiY29uY2F0IiwiaGFzVXNlckxpa2VkIiwic29tZSIsImxpa2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfdGhpczMiLCJhZGRFdmVudExpc3RlbmVyIiwiX29wZW5JbWFnZVBvcHVwIiwicmVtb3ZlIiwiYWRkIiwiY2xvc2VzdCIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJ2YWxpZGF0aW9uIiwiX2RlZmluZVByb3BlcnR5IiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZmllbGRzZXQiLCJfdmFsaWRhdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX2RhdGFBcnJheSIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfaGFuZGxlT3V0c2lkZUNsaWNrIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbGJhY2siLCJfZm9ybSIsIl9idXR0b25TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3VzZXJuYW1lIiwiX2Fib3V0IiwiX2F2YXRhclNlbGVjdG9yIiwiX3VzZXJJRCIsIl9uYW1lSW5wdXQiLCJfYWJvdXRJbnB1dCIsImFib3V0IiwiX2pvYklucHV0IiwidXNlcm5hbWUiLCJhdmF0YXIiLCJBcGkiLCJiYXNlVVJMIiwiaGVhZGVycyIsIl9iYXNlVVJMIiwiX2hlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSUQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsInJlbmRlckxvYWRpbmciLCJhY3Rpb24iLCJpc0xvYWRpbmciLCJwYWdlQ29udGFpbmVyIiwicHJvZmlsZUF1dGhvciIsInByb2ZpbGVBYm91dCIsInByb2ZpbGVDb250YWluZXIiLCJwb3B1cFByb2ZpbGUiLCJlZGl0UHJvZmlsZUJ0biIsInN1Ym1pdFByb2ZpbGVCdG4iLCJwbGFjZXNDb250YWluZXIiLCJwb3B1cFBsYWNlcyIsImFkZENhcmRCdG4iLCJwcm9maWxlSW5mbyIsInJlbW92ZUNhcmQiLCJpbWFnZVBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZWRpdFByb2ZpbGUiLCJlZGl0UHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUNhcmQiLCJuZXdDYXJkIiwib3BlbiIsIl9yZWYyIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsZXRlQ2FyZCIsIl90cmFzaEJ0biIsIl9yZWYzIiwiYWRkTGlrZSIsInVwZGF0ZUxpa2VzIiwiX2FkZExpa2UiLCJfcmVmNCIsImRlbGV0ZUxpa2UiLCJfcmVtb3ZlTGlrZSIsImdlbmVyYXRlQ2FyZCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZFNlY3Rpb24iLCJjYXJkRWxlbWVudCIsImFkZEluaXRhbEl0ZW1zIiwicmVuZGVyZWRJdGVtcyIsImFkZENhcmQiLCJhZGROZXdDYXJkIiwiY2FyZCIsIm5ld0NhcmRFbGVtZW50IiwiYWRkSXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==